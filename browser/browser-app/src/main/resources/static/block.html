<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>block info</title>
</head>
<!-- 新 Bootstrap 核心 CSS 文件 -->
<link href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet"/>
<link href="css/base.css" rel="stylesheet">
<!--jQery文件,务必在bootstrap.min.js之前引入-->
<script src="js/base.js"></script>
<script src="http://apps.bdimg.com/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function () {
        //根据区块hash查询区块详情
        $("#queryRecentList").click(function () {
            var val = $("#queryRecentList").html();
            var newVal = val.replace(/(^\s*)|(\s*$)/g, "");
            if (newVal == "查询") {
                var limit = $("#limit").val();
                $.get(browser_api.URL.getRecentHeaderList(limit), function (success) {
                    $("#tab").html("");
                    var tableHeader = "<tr><td>height</td> <td>blockHash</td><td>creationTime</td><td>preBlockHash</td></tr>";
                    $("#tab").append(tableHeader);
                    var dataInfo = "";
                    $(success.data.items).each(function (i, n) {
                        dataInfo = "<tr><td>" + n.height + "</td><td>" + n.blockHash + "</td><td>" + n.blockTime + "</td><td>" + n.preBlockHash + "</tr>";
                        $("#tab").append(dataInfo);
                        $("#queryRecentList").html("");
                        $("#queryRecentList").html("收起")
                        $('#collapseTwo').collapse('show')
                    });
                });
            } else {
                $("#queryRecentList").html("查询");
                $('#collapseTwo').collapse('hide')
            }
        });
    });
</script>

<body>
<div>
    <span class="font">获取最新的区块头列表</span>
    <input type="text" class="form-control" placeholder="Please enter the number of the latest blocks you want to query" id="limit" style="width: 500px;margin:45px auto 10px auto">
    <button id="queryRecentList" class="btn btn-primary">查询</button>
</div>
<div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
    <div class="panel-body">
        <table id="tab" class="table table-hover">
        </table>
    </div>
</div>
</body>
</html>